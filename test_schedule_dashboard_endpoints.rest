###############################################
# SCHEDULE DASHBOARD API TESTS
###############################################

### Variables (Replace with actual tokens)
@petOwnerToken = YOUR_PET_OWNER_TOKEN_HERE
@providerToken = YOUR_SERVICE_PROVIDER_TOKEN_HERE
@managerToken = YOUR_MANAGER_TOKEN_HERE
@baseUrl = https://localhost:8443

###############################################
# PET OWNER SCHEDULE DASHBOARD ENDPOINTS
###############################################

### 1. Get Pet Owner's Schedule Dashboard (All Appointments)
GET {{baseUrl}}/api/schedule/dashboard
Authorization: Bearer {{petOwnerToken}}

### 2. Get Pet Owner's Schedule Dashboard with Date Range
GET {{baseUrl}}/api/schedule/dashboard?startDate=2025-06-01&endDate=2025-06-30
Authorization: Bearer {{petOwnerToken}}

### 3. Get Pet Owner's Schedule Dashboard with Status Filter
GET {{baseUrl}}/api/schedule/dashboard?status=pending
Authorization: Bearer {{petOwnerToken}}

### 4. Get Pet Owner's Schedule Dashboard with Combined Filters
GET {{baseUrl}}/api/schedule/dashboard?startDate=2025-06-01&endDate=2025-12-31&status=completed
Authorization: Bearer {{petOwnerToken}}

### 5. Get Pet Owner's Weekly Schedule (Current Week)
GET {{baseUrl}}/api/schedule/weekly
Authorization: Bearer {{petOwnerToken}}

### 6. Get Pet Owner's Weekly Schedule (Specific Week)
GET {{baseUrl}}/api/schedule/weekly?weekStart=2025-06-15
Authorization: Bearer {{petOwnerToken}}

### 7. Get Pet Owner's Today's Schedule
GET {{baseUrl}}/api/schedule/today
Authorization: Bearer {{petOwnerToken}}

###############################################
# SERVICE PROVIDER SCHEDULE DASHBOARD ENDPOINTS
###############################################

### 8. Get Service Provider's Schedule Dashboard (All Work Appointments)
GET {{baseUrl}}/api/schedule/provider-dashboard
Authorization: Bearer {{providerToken}}

### 9. Get Service Provider's Schedule Dashboard with Date Range
GET {{baseUrl}}/api/schedule/provider-dashboard?startDate=2025-06-01&endDate=2025-06-30
Authorization: Bearer {{providerToken}}

### 10. Get Service Provider's Schedule Dashboard with Status Filter
GET {{baseUrl}}/api/schedule/provider-dashboard?status=completed
Authorization: Bearer {{providerToken}}

### 11. Get Service Provider's Schedule Dashboard with Service Type Filter
GET {{baseUrl}}/api/schedule/provider-dashboard?serviceType=grooming
Authorization: Bearer {{providerToken}}

### 12. Get Service Provider's Monthly Schedule (Current Month)
GET {{baseUrl}}/api/schedule/monthly
Authorization: Bearer {{providerToken}}

### 13. Get Service Provider's Monthly Schedule (Specific Month)
GET {{baseUrl}}/api/schedule/monthly?year=2025&month=7
Authorization: Bearer {{providerToken}}

### 14. Get Service Provider's Today's Work Schedule
GET {{baseUrl}}/api/schedule/provider-today
Authorization: Bearer {{providerToken}}

###############################################
# GENERAL SCHEDULE MANAGEMENT ENDPOINTS
###############################################

### 15. Create a Schedule Entry (Pet Owner)
POST {{baseUrl}}/api/schedule/create
Authorization: Bearer {{petOwnerToken}}
Content-Type: application/json

{
    "scheduled_time": "2025-06-15T14:30:00",
    "title": "Pet Health Checkup Reminder",
    "detail": "Annual health checkup for Max at downtown vet clinic"
}

### 16. Create a Schedule Entry (Service Provider)
POST {{baseUrl}}/api/schedule/create
Authorization: Bearer {{providerToken}}
Content-Type: application/json

{
    "scheduled_time": "2025-06-20T09:00:00",
    "title": "Equipment Maintenance",
    "detail": "Monthly grooming equipment maintenance and cleaning"
}

### 17. Get Pet Owner's Schedule Entries
GET {{baseUrl}}/api/schedule/entries
Authorization: Bearer {{petOwnerToken}}

### 18. Get Pet Owner's Schedule Entries with Date Range
GET {{baseUrl}}/api/schedule/entries?startDate=2025-06-01&endDate=2025-06-30
Authorization: Bearer {{petOwnerToken}}

### 19. Get Service Provider's Schedule Entries
GET {{baseUrl}}/api/schedule/entries
Authorization: Bearer {{providerToken}}

###############################################
# ERROR HANDLING AND AUTHORIZATION TESTS
###############################################

### 20. Test Pet Owner accessing Service Provider Dashboard (Should Fail)
GET {{baseUrl}}/api/schedule/provider-dashboard
Authorization: Bearer {{petOwnerToken}}

### 21. Test Service Provider accessing Pet Owner Dashboard (Should Fail)
GET {{baseUrl}}/api/schedule/dashboard
Authorization: Bearer {{providerToken}}

### 22. Test Unauthenticated Access (Should Fail)
GET {{baseUrl}}/api/schedule/dashboard

### 23. Test Manager accessing Pet Owner Dashboard (Should Fail)
GET {{baseUrl}}/api/schedule/dashboard
Authorization: Bearer {{managerToken}}

### 24. Test Invalid Date Format
GET {{baseUrl}}/api/schedule/dashboard?startDate=invalid-date
Authorization: Bearer {{petOwnerToken}}

### 25. Test Invalid Status Filter
GET {{baseUrl}}/api/schedule/dashboard?status=invalid-status
Authorization: Bearer {{petOwnerToken}}

###############################################
# EDGE CASES AND VALIDATION TESTS
###############################################

### 26. Test Empty Schedule Response
GET {{baseUrl}}/api/schedule/today
Authorization: Bearer {{petOwnerToken}}

### 27. Test Future Date Range
GET {{baseUrl}}/api/schedule/dashboard?startDate=2026-01-01&endDate=2026-12-31
Authorization: Bearer {{petOwnerToken}}

### 28. Test Create Schedule Entry with Missing Title (Should Fail)
POST {{baseUrl}}/api/schedule/create
Authorization: Bearer {{petOwnerToken}}
Content-Type: application/json

{
    "scheduled_time": "2025-06-15T14:30:00",
    "detail": "This should fail because title is missing"
}

### 29. Test Create Schedule Entry with Invalid DateTime (Should Fail)
POST {{baseUrl}}/api/schedule/create
Authorization: Bearer {{petOwnerToken}}
Content-Type: application/json

{
    "scheduled_time": "invalid-datetime",
    "title": "This should fail",
    "detail": "Invalid datetime format test"
}

### 30. Test Monthly Schedule with Invalid Month
GET {{baseUrl}}/api/schedule/monthly?year=2025&month=13
Authorization: Bearer {{providerToken}}

###############################################
# PERFORMANCE AND LOAD TESTS
###############################################

### 31. Test Large Date Range Query
GET {{baseUrl}}/api/schedule/dashboard?startDate=2020-01-01&endDate=2030-12-31
Authorization: Bearer {{petOwnerToken}}

### 32. Test Provider Dashboard with All Filters
GET {{baseUrl}}/api/schedule/provider-dashboard?startDate=2025-01-01&endDate=2025-12-31&status=completed&serviceType=veterinary
Authorization: Bearer {{providerToken}}

###############################################
# FUNCTIONAL VERIFICATION TESTS
###############################################

### 33. Verify Dashboard Data Structure (Pet Owner)
GET {{baseUrl}}/api/schedule/dashboard
Authorization: Bearer {{petOwnerToken}}
# Expected: appointments array, statistics object, filters object

### 34. Verify Weekly Schedule Data Structure
GET {{baseUrl}}/api/schedule/weekly
Authorization: Bearer {{petOwnerToken}}
# Expected: weeklySchedule with days of week, appointments per day

### 35. Verify Provider Dashboard Statistics
GET {{baseUrl}}/api/schedule/provider-dashboard
Authorization: Bearer {{providerToken}}
# Expected: workAppointments array, statistics with revenue data, serviceBreakdown
